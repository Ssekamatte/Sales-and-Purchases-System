@inherits LayoutComponentBase
@inject IBootstrapCss BootstrapCss;
@using Sales.Data;
@inject UserManagement userManagement;
<style>
    .top-row {
        height: 3.5rem;
        display: block;
        align-items: center;
    }
</style>

@*<BlazoredToasts/>*@
<BlazoredToasts   Position="Blazored.Toast.Configuration.ToastPosition.BottomRight"
                Timeout="20"
                IconType="Blazored.Toast.IconType.FontAwesome"
                SuccessClass="success-toast-override"
                SuccessIcon="fa fa-check"
                ErrorIcon="fa fa-times"
                InfoIcon="fa fa-info"
                WarningIcon="fa fa-warning" />

<div class="page">
    @if (userManagement.IsSignedIn())
    {
        <div class="sidebar">
            <NavMenu/>
        </div>

    }

    <div class="main">
        @if (userManagement.IsSignedIn())
        {
            <div class="top-row px-4">
                <div style="float: right; align-items: center; margin-top: 2vh;">
                    <LoginDisplay/>
                </div>
            </div>
        }
        <div class="content px-4">
            @Body
        </div>
    </div>
</div>

@code{
    private bool isServerSide = false;
    protected override async Task OnInitializedAsync()
    {
        try
        {
            await BootstrapCss.SetBootstrapCss("4.3.1");
        }
        catch (Exception)
        {

            isServerSide = true;
        }
    }
    protected override async Task OnAfterRenderAsync(bool firstRun)
    {
        if (isServerSide && firstRun)
        {
            await BootstrapCss.SetBootstrapCss("4.3.1");
        }
    }
}
